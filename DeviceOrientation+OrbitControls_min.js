THREE.OrbitControls=function(e,t){function n(){return Math.pow(.95,L.zoomSpeed)}function o(e){P.theta-=e}function i(e){P.phi-=e}function a(e){D.set(e.clientX,e.clientY)}function r(e){F.set(e.clientX,e.clientY)}function s(e){Y.set(e.clientX,e.clientY),j.subVectors(Y,D);var t=L.domElement===document?L.domElement.body:L.domElement;o(2*Math.PI*j.x/t.clientWidth*(L.rotateSpeed*L.dampingFactor)),i(Math.PI*j.y/t.clientHeight*(L.rotateSpeed*L.dampingFactor)),D.copy(Y),L.update()}function u(e){I.set(e.clientX,e.clientY),S.subVectors(I,F),S.y>0?L.dollyIn(n()):S.y<0&&L.dollyOut(n()),F.copy(I),L.update()}function m(e){e.deltaY<0?L.dollyOut(n()):e.deltaY>0&&L.dollyIn(n()),L.update()}function c(e){D.set(e.touches[0].pageX,e.touches[0].pageY)}function d(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+n*n);F.set(0,o)}function E(e){Y.set(e.touches[0].pageX,e.touches[0].pageY),j.subVectors(Y,D);var t=L.domElement===document?L.domElement.body:L.domElement;o(2*Math.PI*j.x/t.clientWidth*(L.rotateSpeed*L.dampingFactor)),i(Math.PI*j.y/t.clientHeight*(L.rotateSpeed*L.dampingFactor)),D.copy(Y),L.update()}function h(e){var t=e.touches[0].pageX-e.touches[1].pageX,o=e.touches[0].pageY-e.touches[1].pageY,i=Math.sqrt(t*t+o*o);I.set(0,i),S.subVectors(I,F),S.y>0?L.dollyOut(n()):S.y<0&&L.dollyIn(n()),F.copy(I),L.update()}function l(e){e.preventDefault(),L.switched=!0,e.button===L.mouseButtons.ORBIT?(a(e),A=y.ROTATE):e.button===L.mouseButtons.ZOOM&&(r(e),A=y.DOLLY),A!==y.NONE&&(document.addEventListener("mousemove",p,!1),document.addEventListener("mouseup",v,!1),L.dispatchEvent(R))}function p(e){e.preventDefault(),A===y.ROTATE?s(e):A===y.DOLLY&&u(e)}function v(e){document.removeEventListener("mousemove",p,!1),document.removeEventListener("mouseup",v,!1),L.dispatchEvent(H),A=y.NONE}function O(e){L.enabled===!1||L.enableZoom===!1||A!==y.NONE&&A!==y.ROTATE||(e.preventDefault(),e.stopPropagation(),m(e),L.dispatchEvent(R),L.dispatchEvent(H))}function T(e){switch(L.switched=!0,e.touches.length){case 1:c(e),A=y.TOUCH_ROTATE;break;case 2:if(L.enableZoom===!1)return;d(e),A=y.TOUCH_DOLLY;break;default:A=y.NONE}A!==y.NONE&&L.dispatchEvent(R)}function g(e){if(L.enabled!==!1)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(A!==y.TOUCH_ROTATE)return;E(e);break;case 2:if(A!==y.TOUCH_DOLLY)return;h(e);break;default:A=y.NONE}}function w(e){L.dispatchEvent(H),A=y.NONE}function f(e){e.preventDefault()}this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.dampingEnded=!0,this.minDelta=.002,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=-Math.PI/2,this.maxPolarAngle=Math.PI/2,this.switched=!1,this.minAzimuthAngle=-(1/0),this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=.75,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:THREE.MOUSE.LEFT,ZOOM:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.RIGHT},this.zoom0=this.object.zoom;var L=this,b={type:"change"},R={type:"start"},H={type:"end"},y={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},A=y.NONE,M=1,N=!1,x=new THREE.Spherical,P=new THREE.Spherical,D=new THREE.Vector2,Y=new THREE.Vector2,j=new THREE.Vector2,F=new THREE.Vector2,I=new THREE.Vector2,S=new THREE.Vector2;this.getPolarAngle=function(){return x.phi},this.getAzimuthalAngle=function(){return x.theta},this.reset=function(){L.object.zoom=L.zoom0,L.object.updateProjectionMatrix(),L.dispatchEvent(b),L.update(),A=y.NONE},this.update=function(){var e=new THREE.Quaternion,t=new THREE.Quaternion,n=new THREE.Quaternion,o=new THREE.Euler(0,0,0,"YXZ"),i=new THREE.Quaternion,a=new THREE.Vector3(1,0,0),r=new THREE.Vector3(0,1,0);return function(){return L.dampingEnded=Math.abs(P.theta)+Math.abs(P.phi)<L.minDelta,A==y.NONE&&L.dampingEnded?void 0:(L.switched&&(o.setFromQuaternion(L.object.quaternion,"YXZ"),x.phi=o.x,x.theta=o.y,L.switched=!1),e.setFromAxisAngle(r,x.theta),e.multiply(i.setFromAxisAngle(a,x.phi)),x.phi+=P.phi,x.theta+=P.theta,x.phi=Math.max(L.minPolarAngle,Math.min(L.maxPolarAngle,x.phi)),x.radius*=M,x.radius=Math.min(L.maxDistance,x.radius),t.setFromAxisAngle(r,x.theta),t.multiply(i.setFromAxisAngle(a,x.phi)),n=e.inverse().multiply(t),L.object.quaternion.multiply(n),L.dampingEnded?P.set(0,0,0):(P.theta*=1-L.dampingFactor,P.phi*=1-L.dampingFactor),!1)}}(),this.lastOrientation=[0,0,0,0],this.tilt=function(){var e=[],t=Math.PI/180,n=new THREE.Quaternion,o=new THREE.Quaternion,i=new THREE.Quaternion;return function(){A==y.NONE&&L.dampingEnded&&(e=[event.alpha?event.alpha*t:0,event.beta?event.beta*t:0,event.gamma?event.gamma*t:0,L.screenOrientation?L.screenOrientation*t:0],null==L.lastOrientation&&(L.lastOrientation=e),V(n,e),V(o,L.lastOrientation),i=o.inverse().multiply(n),L.object.quaternion.multiply(i),L.lastOrientation=e)}}();var Z=function(){L.screenOrientation=window.orientation||0};Z();var z=function(){L.lastOrientation=null};window.addEventListener("orientationchange",Z,!1),this.dispose=function(){L.domElement.removeEventListener("contextmenu",f,!1),L.domElement.removeEventListener("mousedown",l,!1),L.domElement.removeEventListener("wheel",O,!1),L.domElement.removeEventListener("touchstart",T,!1),L.domElement.removeEventListener("touchend",w,!1),L.domElement.removeEventListener("touchmove",g,!1),document.removeEventListener("mousemove",p,!1),document.removeEventListener("mouseup",v,!1),document.removeEventListener("mouseup",z,!1),document.removeEventListener("touchend",z,!1),window.removeEventListener("orientationchange",Z,!1),window.removeEventListener("deviceorientation",this.tilt,!1)},this.dollyIn=function(e){M/=e,L.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom*e)),L.object.updateProjectionMatrix(),N=!0},this.dollyOut=function(e){M*=e,L.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/e)),L.object.updateProjectionMatrix(),N=!0},L.domElement.addEventListener("contextmenu",f,!1),L.domElement.addEventListener("mousedown",l,!1),L.domElement.addEventListener("wheel",O,!1),L.domElement.addEventListener("touchstart",T,!1),L.domElement.addEventListener("touchend",w,!1),L.domElement.addEventListener("touchmove",g,!1),this.activateDeviceOrientation=function(e){window.DeviceOrientationEvent&&(e?(z(),window.removeEventListener("deviceorientation",this.tilt,!1),window.addEventListener("deviceorientation",this.tilt,!1),document.removeEventListener("mouseup",z,!1),document.removeEventListener("touchend",z,!1),document.addEventListener("mouseup",z,!1),document.addEventListener("touchend",z,!1)):(window.removeEventListener("deviceorientation",this.tilt,!1),document.removeEventListener("mouseup",z,!1),document.removeEventListener("touchend",z,!1)))};var V=function(){var e=new THREE.Vector3(0,0,1),t=new THREE.Euler,n=new THREE.Quaternion,o=new THREE.Quaternion(-Math.sqrt(.5),0,0,Math.sqrt(.5));return function(i,a){t.set(a[1],a[0],-a[2],"YXZ"),i.setFromEuler(t),i.multiply(o),i.multiply(n.setFromAxisAngle(e,-a[3]))}}();this.update()},THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.OrbitControls.prototype.constructor=THREE.OrbitControls;1),this.activateDeviceOrientation=function(e){window.DeviceOrientationEvent&&(e?(z(),window.removeEventListener("deviceorientation",this.tilt,!1),window.addEventListener("deviceorientation",this.tilt,!1),document.removeEventListener("mouseup",z,!1),document.removeEventListener("touchend",z,!1),document.addEventListener("mouseup",z,!1),document.addEventListener("touchend",z,!1)):(window.removeEventListener("deviceorientation",this.tilt,!1),document.removeEventListener("mouseup",z,!1),document.removeEventListener("touchend",z,!1)))};var V=function(){var e=new THREE.Vector3(0,0,1),t=new THREE.Euler,n=new THREE.Quaternion,o=new THREE.Quaternion(-Math.sqrt(.5),0,0,Math.sqrt(.5));return function(i,a){t.set(a[1],a[0],-a[2],"YXZ"),i.setFromEuler(t),i.multiply(o),i.multiply(n.setFromAxisAngle(e,-a[3]))}}();this.update()},THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.OrbitControls.prototype.constructor=THREE.OrbitControls;